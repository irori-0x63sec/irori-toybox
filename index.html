<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>Irori's Toybox — 小さな作品たちの置き場</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="個人開発のミニゲームや学習ツールを置いていく実験箱。おすすめは英単語タイピングゲーム『Lexi Blaster』。" />
  <link rel="canonical" href="https://irori-toybox.com/">
  <meta name="theme-color" content="#0b1520" />

  <!-- OG/Twitter -->
  <meta property="og:title" content="Irori's Toybox" />
  <meta property="og:description" content="個人開発のミニゲームや学習ツールの置き場。英単語ゲーム『Lexi Blaster』公開中。" />
  <meta property="og:url" content="https://irori-toybox.com/" />
  <meta property="og:image" content="https://irori-toybox.com/ogp.png" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- AdSense（サイト審査用タグ：そのままでOK） -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6056438145584303" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/site.css">
  <script src="/assets/load-header.js" defer></script>

  <style>
    :root{
      --bg:#0b1520; --panel:#121c28; --panel-2:#0f1d2a; --txt:#e6f2ff; --muted:#9ab6c9; --acc:#5cd4ff; --acc-2:#ffb35a; --border:#203447;
    }
    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0; background: radial-gradient(1200px 600px at 20% -10%, #0e2436 0%, transparent 60%),
                       radial-gradient(900px 500px at 100% 0%, #0a2132 0%, transparent 60%),
                       var(--bg);
      color:var(--txt); font: 16px/1.7 system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      letter-spacing:.02em;
    }
    a{ color:var(--acc); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{ width:min(1000px, 92vw); margin:0 auto; padding: 28px 0 64px; }
    header{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:20px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo{
      width:40px; height:40px; border-radius:10px;
      background: linear-gradient(135deg,#173653,#0f2a40);
      border:1px solid var(--border); display:grid; place-items:center; color:#cfe8ff; font-weight:800;
      box-shadow:0 6px 24px rgba(0,0,0,.3), inset 0 0 40px rgba(92,212,255,.08);
    }
    nav a{ margin-left:14px; color:var(--muted); }
    nav a:hover{ color:var(--txt); }

    .hero{
      margin: 6px 0 24px;
      padding: 28px;
      border:1px solid var(--border);
      border-radius:16px;
      background: linear-gradient(180deg, rgba(18,28,40,.9), rgba(15,29,42,.9));
      box-shadow: 0 20px 50px rgba(0,0,0,.35);
    }
    .hero h1{ margin:0 0 8px; font-size: clamp(22px, 4vw, 30px); letter-spacing:.03em; }
    .hero p{ margin:0; color:var(--muted); }
    .cta-row{ margin-top:18px; display:flex; gap:12px; flex-wrap:wrap; }
    .btn{
      appearance:none; border:1px solid var(--border); border-radius:12px; padding:10px 16px; cursor:pointer;
      background: var(--panel-2); color:var(--txt); font-weight:700; text-decoration:none; display:inline-flex; align-items:center; gap:10px;
      box-shadow: 0 6px 20px rgba(0,0,0,.25);
    }
    .btn.primary{ background: linear-gradient(180deg,#1a3b52,#143245); border-color:#18435a; }
    .btn .sub{ font-weight:600; color:var(--muted); font-size:.9em; }

    .grid{ display:grid; grid-template-columns: 1fr; gap:16px; margin-top:24px; }
    @media (min-width: 760px){ .grid{ grid-template-columns: 1.3fr .7fr; } }

    .card{
      border:1px solid var(--border); border-radius:14px; background:var(--panel); padding:16px 16px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.28);
    }
    .card h2{ margin:2px 0 10px; font-size:18px; letter-spacing:.02em; }
    .card ul{ list-style:none; padding:0; margin:0; }
    .card li{ padding:10px 8px; border-top:1px solid rgba(255,255,255,.06); }
    .card li:first-child{ border-top:none; }
    .meta{ color:var(--muted); font-size:.92em; }

    .projects{ display:grid; grid-template-columns: 1fr; gap:12px; }
    @media (min-width: 600px){ .projects{ grid-template-columns: 1fr 1fr; } }
    .proj{
      border:1px solid var(--border); border-radius:12px; padding:14px; background:var(--panel-2);
    }
    .tag{ font-size:.78em; color:#001018; background:var(--acc); padding:2px 8px; border-radius:999px; font-weight:800; }

    footer{ margin-top:28px; padding-top:16px; color:var(--muted); display:flex; flex-wrap:wrap; gap:12px; justify-content:space-between; border-top:1px solid var(--border); }
    .links a{ margin-right:12px; }
    .small{ font-size:.9em; }

    /* 視認性向上 */
    .kbd{ font: 600 12px/1 system-ui, -apple-system, "Segoe UI", Roboto; padding:3px 6px; border:1px solid #2a3a48; border-radius:6px; background:#09121a; color:#cfe8ff; }

    /* テキスト + 小サムネ（右端固定幅） */
    .hero-compact{
      display:grid; gap:14px; align-items:center;
      grid-template-columns: 1fr auto;   /* 右を“auto”で小さく */
    }

    /* サムネの見た目＆サイズ（超軽量） */
    .hero-thumb{
      display:block; width: 400px;        /* ★ここでサイズ調整（200–260px推奨） */
      border:1px solid var(--border);
      border-radius:12px; background:var(--panel-2);
      padding:8px; box-shadow:0 8px 22px rgba(0,0,0,.22);
    }
    .hero-thumb picture, .hero-thumb img{
      display:block; width:100%; height:auto; border-radius:8px;
    }

    /* モバイルは縦並び＆さらに小さく */
    @media (max-width: 760px){
      .hero-compact{ grid-template-columns: 1fr; }
      .hero-thumb{ width:160px; margin-top:6px; }
    }

  </style>

  <!-- 構造化データ（任意） -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Irori's Toybox",
    "url": "https://irori-toybox.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://irori-toybox.com/?q={query}",
      "query-input": "required name=query"
    }
  }
  </script>
</head>
<body>
  <header class="site" id="site-header" hidden></header>
    <section class="hero">
      <h1>小さな作品たちの置き場へようこそ。</h1>
      <div class="cta-row">
        <a class="btn primary" href="/lexiblaster/">
          ▶ 今すぐプレイ
          <span class="sub">PC推奨／キーボード操作</span>
        </a>
        <a class="btn" href="/changelog/">📝 更新履歴を見る</a>
      </div>
    </section>

    <div class="grid">
      <!-- 左：注目 -->
      <section class="card">
        <h2 style="display:flex;align-items:center;gap:10px;margin:2px 0 10px">
          Lexi Blaster — 英単語タイピングゲーム</h2>

        <p class="meta">PC専用 / 完全無料 /  スコア共有</p>

        <ul>
          <li></li>
          <li><strong>英単語タイピング</strong>で撃ち抜く学習ゲーム。タイプして <span class="kbd">Enter</span> で発射。</li>
          <li>Cookie同意がなくても遊べます（同意時は <span class="kbd">スコア</span> と <span class="kbd">ミュート</span> を保存）。</li>
        </ul>

        <div class="cta-row" style="margin-top:12px;display:flex;gap:12px;flex-wrap:wrap">
          <a class="btn primary" href="/lexiblaster/">▶ 今すぐプレイ</a>
          <a class="btn" href="/changelog/">📝 更新履歴</a>
        </div>
        <a class="hero-thumb" href="/lexiblaster/" aria-label="Lexi Blaster をプレイ">
          <picture>
            <source srcset="/lexiblaster/social/hero.webp" type="image/webp">
            <img src="/lexiblaster/social/hero.png"
                alt="Lexi Blaster のサムネイル"
                width="240" height="180"
                loading="lazy" decoding="async" />
          </picture>
        </a>
      </section>

      <!-- 右：更新 -->
      <aside class="card">
        <h2>更新履歴（最近）</h2>
        <ul id="recent-changelog"><li>読み込み中…</li></ul>
        <p style="margin-top:10px;"><a href="/changelog/">全ての更新を見る →</a></p>
      </aside>
    </div>

    <!-- 今後の作品 / スロット -->
    <section class="card" style="margin-top:16px;">
      <h2>Works / 進行中</h2>
      <div class="projects">
        <div class="proj">
          <div class="tag">Planning</div>
          <h3 style="margin:8px 0 6px;"> Railroad Syntax（仮）</h3>
          <p class="small">英文法学習のためのパズルゲーム</p>
        </div>
      </div>
    </section>

    <footer>
      <div class="links">
        <a href="/privacy/">プライバシーポリシー</a>
        <a href="/cookie-policy/">クッキーポリシー</a>
        <a href="/contact/">お問い合わせ</a>
      </div>
      <div class="small">© <span id="y"></span> Irori</div>
    </footer>
  </div>

  <script>
    // 年号の自動更新
    (function(){ document.getElementById('y').textContent = new Date().getFullYear(); })();

    // changelog から最新N件を抜粋して表示
    (async function loadRecentFromChangelog(N = 3){
      const list = document.getElementById('recent-changelog');
      if (!list) return;
      try {
        const res  = await fetch('/changelog/');
        const html = await res.text();
        const doc  = new DOMParser().parseFromString(html, 'text/html');

        // 各エントリ（.card）から「日付」と「タイトル（h3 or 最初のli）」を抽出
        const cards = Array.from(doc.querySelectorAll('.card'));
        const items = cards.slice(0, N).map(card => {
          const date  = (card.querySelector('.time') || card.querySelector('time'))?.textContent?.trim() || '';
          const title = card.querySelector('h3')?.textContent?.trim()
                    || card.querySelector('li')?.textContent?.trim()
                    || '更新';
          const id    = card.id || '';
          const href  = '/changelog/' + (id ? ('#' + id) : '');
          return { date, title, href };
        }).filter(x => x.title);

        list.innerHTML = items.map(i =>
          `<li><a href="${i.href}"><strong>${i.date}</strong> — ${i.title}</a></li>`
        ).join('') || `<li>項目が見つかりませんでした。<a href="/changelog/">更新履歴へ</a></li>`;
      } catch (e) {
        console.warn('[changelog-load]', e);
        list.innerHTML = `<li>読み込みに失敗しました。<a href="/changelog/">更新履歴へ</a></li>`;
      }
    })();
  </script>

</body>
</html>
